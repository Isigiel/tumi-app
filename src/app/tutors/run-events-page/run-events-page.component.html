<!--
  ~     The TUMi app provides a modern way of managing events for an esn section.
  ~     Copyright (C) 2020  Lukas Heddendorp
  ~
  ~     This program is free software: you can redistribute it and/or modify
  ~     it under the terms of the GNU General Public License as published by
  ~     the Free Software Foundation, either version 3 of the License, or
  ~     (at your option) any later version.
  ~
  ~     This program is distributed in the hope that it will be useful,
  ~     but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~     GNU General Public License for more details.
  ~
  ~     You should have received a copy of the GNU General Public License
  ~     along with this program.  If not, see <https://www.gnu.org/licenses/>.
  -->

<h4 class="no-margin mat-display-3">My Events</h4>
<!-- TODO: Improve rendering performance for this list -->
<div gdAuto gdColumns="repeat(auto-fit, minmax(300px, 1fr))" gdGap="1rem">
  <mat-card *ngFor="let event of events$ | async; trackBy: getId" fxLayout="column">
    <mat-card-title-group>
      <img
        *ngIf="event.icon"
        fxFlex="80px"
        height="80px"
        loading="lazy"
        mat-card-sm-image
        src="https://img.icons8.com/color/192/{{ event.icon }}.svg?token=9b757a847e9a44b7d84dc1c200a3b92ecf6274b2"
        width="80px"
      />
      <mat-card-title>{{ event.name }} </mat-card-title>
      <mat-card-subtitle>{{ event.start | date: 'short' }}</mat-card-subtitle>
    </mat-card-title-group>
    <div fxFlex></div>
    <mat-card-content>
      <p>Tutors still needed: {{ event.tutorSpots - event.tutorSignups.length }} / {{ event.tutorSpots }}</p>
      <p>
        User signed up: {{ event.isTicketTracker ? event.soldTickets : event.usersSignedUp }} /
        {{ event.participantSpots }}
      </p>
    </mat-card-content>
    <mat-card-actions fxLayout="row">
      <button fxFlex mat-button routerLink="./{{ event.id }}">More Info</button>
    </mat-card-actions>
  </mat-card>
</div>
